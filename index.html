<script>
    var androidUrl = "https://play.google.com/store/apps/details?id=com.pacificprimecxa.android";
    var iosUrl = "https://apps.apple.com/us/app/pacific-prime-cxa-benefits/id6462017741";
    var customAndroidScheme = "ppcxa://server/prod";
    var customIOSScheme = "ppcxa://server/prod";

    window.onload = function() {
        var userAgent = navigator.userAgent || navigator.vendor || window.opera;
        var timeoutId;

        if (/android/i.test(userAgent)) {
            var androidAppInstalled = false;
            // Check if the custom Android scheme can be opened
            var iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = customAndroidScheme;
            document.body.appendChild(iframe);
            setTimeout(function() {
                document.body.removeChild(iframe);
                if (!androidAppInstalled) {
                    window.location.href = androidUrl; // Fallback to Play Store
                }
            }, 2000); // Adjust timeout as needed

            window.location.href = customAndroidScheme;
            timeoutId = setTimeout(() => {
                window.location.href = androidUrl;
            }, 3000); // Adjust delay as needed
        } else if (/iPad|iPhone|iPod/i.test(userAgent)) {
            var iosAppInstalled = false;
            // Check if the custom iOS scheme can be opened
            var iframe = document.createElement('iframe');
            iframe.style.display = 'none';
            iframe.src = customIOSScheme;
            document.body.appendChild(iframe);
            setTimeout(function() {
                document.body.removeChild(iframe);
                if (!iosAppInstalled) {
                    window.location.href = iosUrl; // Fallback to App Store
                }
            }, 2000); // Adjust timeout as needed

            window.location.href = customIOSScheme;
            timeoutId = setTimeout(() => {
                window.location.href = iosUrl;
            }, 3000); // Adjust delay as needed
        }

        // Clear the timeout if the page is hidden (app has been opened)
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                clearTimeout(timeoutId);
            }
        });
    }
</script>
